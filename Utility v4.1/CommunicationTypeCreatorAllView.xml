<?xml version="1.0" encoding="utf-8"?>
<DataView  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:dsp="http://www.gappex.com/sfp/DataSource/Parameters" Ident="CommunicationTypeCreatorAllView" SegmentType="Admin" TitleResourceKey="CommunicationTypeCreatorAllView_Utility" GroupTitleResourceKey="UtilityGroup" Priority="41" PackageIdent="Utility" IsCheckBox="true" DefaultFilterIdent="CommunicationTypeFilter" ShareFilterIdent="CommunicationTypeFilter">
  <AccessPermissions>
    <string>SuperAdmin</string>
  </AccessPermissions>
  <Buttons>
    <Button xsi:type="LinkButton" Ident="AddButton" FormIdent="CommunicationTypeCreator" TitleResourceKey="AddButton_Utility" />
    <Button xsi:type="LinkButton" Ident="RecountPermissions" TitleResourceKey="RecountPermissions_Utility" Url="~/Clear/RecountPermissions" />
    <Button xsi:type="LinkButton" Ident="Clear" TitleResourceKey="Clear_Utility" Url="~/Clear" />
  </Buttons>
  <DataSource>
		<Columns>
      <Column Ident="Row" IsPrimaryKey="true" IsVisible="false" />
			<Column Ident="ID" TitleResourceKey="ID_Utility" Width="23" />
      <Column Ident="ResrouceKey" TitleResourceKey="ResourceKey_Utility" Width="23" />
      <Column Ident="ColorCssClass" TitleResourceKey="ColorCssClass_Utility" Width="23" />
      <Column Ident="IsUsePermission" TitleResourceKey="IsUsePermission_Utility" Width="23" />
      <Column Ident="Copy" TitleResourceKey="CopyToImport_Utility" Width="8" />

		</Columns>
		<SQL>
      SELECT *
      FROM (
        SELECT 
          ROW_NUMBER() OVER(ORDER BY cot.ID ASC) AS Row
          ,CONCAT('<a href="../../Form/Index/CommunicationTypeCreator?OldID=', cot.ID, '">', cot.ID, '</a>') AS ID
          ,cot.ResrouceKey
          ,CONCAT('<span class="text-', ColorCssClass, '">', cot.ColorCssClass, '</span>') AS ColorCssClass
          ,cot.IsUsePermission
          ,CONCAT(
            '<button type="button" class="btn btn-outline bg-pink-400 text-pink-800 btn-icon rounded-round ml-2" onclick="const elem=document.createElement(''textarea'');elem.value='''
              ,cot.ID
              ,';'
              ,cot.ResrouceKey
              ,';'
              ,cot.ColorCssClass
              ,';'
              ,cot.IsUsePermission
            ,''' + String.fromCharCode(13),document.body.appendChild(elem),elem.select(),document.execCommand(''copy''),document.body.removeChild(elem);"><i class="icon-copy3"></i></button>'
        ) AS Copy
        FROM dbo.CommunicationType AS cot
      ) AS tbl
      WHERE 1 = 1 #FILTER#
      
    </SQL>
		<Parameters>
			<dsp:Parameter xsi:type="dsp:ValueParameter" Ident="DeleteState" DataType="Number" Value="0" />
		</Parameters>
	</DataSource>

  <Sections>
    <Section xsi:type="ExportSection" Ident="BasicExportSection"  TitleResourceKey="BasicExport_Utility" >
      <DataSource>
        <Columns>
          <Column Ident="Row" IsPrimaryKey="true" IsVisible="false" />
          <Column Ident="ID" TitleResourceKey="ID_Utility" />
          <Column Ident="ResrouceKey" TitleResourceKey="ResourceKey_Utility"/>
          <Column Ident="ColorCssClass" TitleResourceKey="ColorCssClass_Utility"/>
          <Column Ident="IsUsePermission" TitleResourceKey="IsUsePermission_Utility"/>
        </Columns>
        <SQL>
          SELECT *
          FROM (
            SELECT 
              ROW_NUMBER() OVER(ORDER BY cot.ID ASC) AS Row
              ,cot.ID
              ,cot.ResrouceKey
              ,cot.ColorCssClass
              ,cot.IsUsePermission
            FROM dbo.CommunicationType AS cot
          ) AS tbl
          WHERE 1 = 1 #FILTER#
        </SQL>
        <Parameters>
          <dsp:Parameter xsi:type="dsp:ValueParameter" Ident="DeleteState" DataType="Number" Value="0" />
        </Parameters>
      </DataSource>
    </Section>
  </Sections>
    
</DataView>